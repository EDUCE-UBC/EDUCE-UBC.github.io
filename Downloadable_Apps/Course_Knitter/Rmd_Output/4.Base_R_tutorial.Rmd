---
title: "Basic R practice"
author: "Dr. Kim Dill-McFarland, U. of British Columbia"
subtitle: "Experiential Data science for Undergraduate Cross-disciplinary Education"
output:
  pdf_document: default
  html_document: default
editor_options: 
  chunk_output_type: console
---
# Basic R practice
## Learning objectives

* 
* 

##
# Working with data in R
## Data import
To start analyzing data, we need to import it into RStudio.

When we want to read a table into R, we use the `read.table` function. Like all functions in R, you need to provide options to `read.table` like the name of the data, etc. To do this, we specify things within parentheses after the function like so.

![](Images/thunderbird.png) Read a table into R
```{r results=FALSE}
#Example comment! Read in a table.
read.table(file="Saanich_OTU.txt")
```

Here, we've told R our `file`. Since we are using a Project, R looks for this file in the Project folder. If we wanted to specify a file not in our Project folder, we would need to provide the full path such as

```{r eval=FALSE, results=FALSE}
read.table(file="/Users/kim/Desktop/Module1/Saanich_OTU.txt")
```

We can also specify other features of our data. In the case of the OTU table, we want to use the options:

* header: tells R that the first row is column names, not data
* row.names: tells R that the first column is row names, not data
* sep: tells R that the data are tab-delimited `"\t"`. If you had a comma-delimited file, you would use `sep=","` or a space-delimited file, `sep=" "`

![](Images/thunderbird.png) Read a table into R with parameters
```{r results=FALSE}
read.table(file="Saanich_OTU.txt", header=TRUE, row.names=1, sep="\t")
```

However, you will see this code just prints our table into the console. Not very useful if we want to do anything with the data. So, we need to name the data as an object in R. We do this by prefacing `read.table` with a name and either `=` or `<-`. I tend to use `=` so you will see that notation throughout this module.

![](Images/thunderbird.png) Save a table as an R object
```{r}
OTU.table = read.table(file="Saanich_OTU.txt", header=TRUE, row.names=1, sep="\t")

#Which is equivalent to

OTU.table <- read.table(file="Saanich_OTU.txt", header=TRUE, row.names=1, sep="\t")
```

Now we see the OTU.table show up in our Environment on the right. If we click on that object in the Environment pane, we can see the table. Row and columns names are in grey boxes and data is in white boxes. *If you have a low RAM computer (like < 6GB), opening this table make take a long time and/or crash RStudio since it has > 7000 columns.*

Since we are using an R project, we can close RStudio, save our `RScript` and `RData`, and when we re-open using the `.Rproj`, our data will still be in the Environment!

![](Images/thunderbird.png) Try it and see!
    
## Data exploration

Let's explore the data that we've imported into R.

![](Images/thunderbird.png) We can list the row and column names. In this case, the rows are specimens and the columns are OTUs (*i.e.* microbial species).

```{r}
row.names(OTU.table)
# Use head() similar to the command line to only see the first few column names
head(colnames(OTU.table))
```

![](Images/thunderbird.png) We can look at the dimensions of our data, number of rows, and number of columns.

```{r}
dim(OTU.table)
nrow(OTU.table)
ncol(OTU.table)
```

These dimensions allow us to call specific parts of the data. We use the notation [rows,columns]. 

![](Images/thunderbird.png) For example, we can look at the first 3 rows and 5 columns of the OTU table.

```{r}
OTU.table[1:3, 1:5]
```

![](Images/thunderbird.png) Also as a table with row and column names, we can call specifics by name.

```{r}
OTU.table["Saanich_010", "Otu0001"]
```

Finally, we can call specific columns using the `$` notation. This is a useful notation for calling an entire column, regardless of its length.

![](Images/thunderbird.png) Calling the OTU1 column

```{r}
OTU.table$Otu0001
```

With the `$` notation, you can start to summarize your data. 

![](Images/thunderbird.png) You can perform basic statistics in R like

```{r}
#Mean/average
mean(OTU.table$Otu0001)
#Median
median(OTU.table$Otu0001)
#Standard deviation
sd(OTU.table$Otu0001)
#Variance
var(OTU.table$Otu0001)
```

# Assignment
Now that you've seen the basics of R/RStudio, you will explore calculating alpha-diversity in the *Alpha-diversity assignment*.

***